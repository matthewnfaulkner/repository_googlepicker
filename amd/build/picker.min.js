/**
 * Google picker js
 *
 * @copyright   2025 Matthew<matthewfaulkner@apoaevents.com>
 * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("repository_googlepicker/picker",["core/log"],(function(Log){return{init:function(clientid,apikey,appid){Log.debug(clientid,apikey,appid);const CLIENT_ID=clientid,APP_ID=appid,DEVELOPER_KEY=apikey;let oauthToken=null,pickerApiLoaded=!1;function handleAuthResult(authResult){authResult&&!authResult.error?(Log.debug(authResult),oauthToken=authResult.access_token,function(){if(Log.debug(pickerApiLoaded),Log.debug(oauthToken),pickerApiLoaded&&oauthToken){const view=(new google.picker.DocsView).setIncludeFolders(!0).setSelectFolderEnabled(!0);(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).setAppId(APP_ID).setOAuthToken(oauthToken).setDeveloperKey(DEVELOPER_KEY).addView(view).setCallback(pickerCallback).build().setVisible(!0)}}()):Log.debug("Google Picker auth failed: "+JSON.stringify(authResult))}function pickerCallback(data){if(data.action===google.picker.Action.PICKED){const doc=data.docs[0];Log.debug("Picked file: "+JSON.stringify(doc))}}gapi.load("auth",{callback:function(){Log.debug(CLIENT_ID),gapi.auth.authorize({client_id:CLIENT_ID,scope:["https://www.googleapis.com/auth/drive.file"],immediate:!1},handleAuthResult)}}),gapi.load("picker",{callback:function(){pickerApiLoaded=!0}})}}}));

//# sourceMappingURL=picker.min.js.map